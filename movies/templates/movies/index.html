{% extends 'movies/base.html' %}

{% block title %}
<title>Movies Atlas</title>
{% endblock %}

{% block content %}
<div class="container">
    <div class="fixed-grid has-3-cols">
        <div class="grid">
            <div class="cell">
                <div class="box">
                    <p class="title is-4">
                        <span class="icon is-small is-left has-text-warning">
                          <i class="fa-solid fa-filter"></i>
                        </span> &nbsp; Filter
                    </p>

                    <div class="block">
                        <div class="checkboxes">
                            <label class="checkbox">
                                <input type="checkbox"/>
                                Movies
                            </label>

                            <label class="checkbox">
                                <input type="checkbox"/>
                                TV Series
                            </label>

                            <label class="checkbox">
                                <input type="checkbox"/>
                                Cartoons
                            </label>

                        </div>
                    </div>

                    <div class="field">
                        <label class="label">Countries</label>
                        <div class="control has-icons-left">
                            <div class="select is-info is-rounded is-fullwidth">
                                <select>
                                    <option value=""></option>
                                    <option value="UK">UK</option>
                                    <option value="USA">USA</option>
                                    <option value="Ukraine">Ukraine</option>
                                    <option value="Germany">Germany</option>
                                    <option value="France">France</option>
                                    <option value="South Korea">South Korea</option>
                                    <option value="Japan">Japan</option>
                                </select>
                            </div>
                            <div class="icon is-small is-left">
                                <i class="fas fa-globe"></i>
                            </div>
                        </div>
                    </div>

                    <div class="field">
                        <label class="label">Genre</label>
                        <div class="control has-icons-left">
                            <div class="select is-info is-rounded is-fullwidth">
                                <select>
                                    <option value=""></option>
                                    <option value="Thriller">Thriller</option>
                                    <option value="Drama">Drama</option>
                                </select>
                            </div>
                            <div class="icon is-small is-left">
                                <i class="fa-solid fa-masks-theater"></i>
                            </div>
                        </div>
                    </div>

                    <div class="field">
                        <label for="sliderYearFrom" class="label">From Year:</label>
                        <input id="sliderYearFrom"
                               class="slider is-fullwidth is-success has-output-tooltip"
                               type="range"
                               min="1930"
                               max="2025"
                               value="1930"
                               step="1"
                               oninput="document.getElementById('sliderOutputYearFrom').value = this.value">

                        <output id="sliderOutputYearFrom" class="ml-2">1930</output>
                    </div>

                    <div class="field">
                        <label for="sliderYearTo" class="label">To Year:</label>
                        <input id="sliderYearTo"
                               class="slider is-fullwidth is-success has-output-tooltip"
                               type="range"
                               min="1930"
                               max="2025"
                               value="2025"
                               step="1"
                               oninput="document.getElementById('sliderOutputYearTo').value = this.value">
                        <output id="sliderOutputYearTo" class="ml-2">2025</output>
                    </div>

                    <div class="block">
                        <div class="field">
                            <label for="sliderIMDbMin" class="label">Lowest IMDb Rating:</label>
                            <input id="sliderIMDbMin"
                                   class="slider is-fullwidth is-success has-output-tooltip"
                                   type="range"
                                   min="1"
                                   max="10"
                                   value="5"
                                   step="0.1"
                                   oninput="document.getElementById('sliderOutputIMDbMin').value = this.value">
                            <output id="sliderOutputIMDbMin" class="ml-2">5</output>
                        </div>
                    </div>

                    <div class="block">

                        <div class="field is-grouped">
                            <div class="control">
                                <button class="button is-link">Search</button>
                            </div>
                            <div class="control">
                                <button class="button is-link is-light">Clear</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="cell is-col-span-2">
                {% for movie in movies_list %}

                <a href="{% url 'movies:get_movie' movie.pk %}" class="list-group-item">
                    <div class="card is-horizontal">
                        <div class="card-image">
                            <figure class="image is-4b5">
                                {% if movie.photo %}
                                <img src="{{ movie.photo.url }}" alt="{{ movie.title }} poster">
                                {% endif %}
                            </figure>
                        </div>
                        <div class="card-content">
                            <div class="media">
                                <div class="media-content">
                                    <p class="title is-4">{{movie.title}}</p>
                                    <p class="subtitle is-6">xxxxx</p>
                                </div>
                                <div class="media-right">
                                    <span class="tag is-warning is-large">{{movie.imdb_rating}}</span>
                                </div>
                            </div>

                            <div class="content">
                                <div>Year: {{movie.year}}</div>
                                <div>Country:
                                    {% for country in movie.country.all %}
                                    {{ country.name }}
                                    {% endfor %}
                                </div>

                                <div>Genre:
                                    {% for genre in movie.genre.all %}
                                    {{ genre.name }}
                                    {% endfor %}
                                </div>

                                <p></p>
                                <div>
                                    {{ movie.description }}
                                </div>
                                <br/>
                            </div>
                        </div>
                    </div>
                </a>
                <br/>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}